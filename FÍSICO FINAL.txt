CREATE DATABASE desejos;
USE desejos;

CREATE TABLE IF NOT EXISTS `ci_sessions` (
        `id` varchar(128) NOT NULL,
        `ip_address` varchar(45) NOT NULL,
        `timestamp` int(10) unsigned DEFAULT 0 NOT NULL,
        `data` blob NOT NULL,
        KEY `ci_sessions_timestamp` (`timestamp`)
);

CREATE TABLE produto (
	produto_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	categoria_id INTEGER,
	nm_produto VARCHAR(40),
	descricao VARCHAR(100),
	foto VARCHAR(100),
	vl_produto DECIMAL(10,2)
);

CREATE TABLE categoria (
	categoria_id INTEGER PRIMARY KEY AUTO_INCREMENT,
        pai_id INTEGER,
        nm_categoria VARCHAR(40)
);

CREATE TABLE lista (
	lista_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	nm_usuario VARCHAR(20),
	email VARCHAR(40)
);

CREATE TABLE usuario (
	usuario_id INTEGER PRIMARY KEY AUTO_INCREMENT,
	nm_usuario VARCHAR(20),
	email VARCHAR(40),
	senha VARCHAR(40),
	telefone VARCHAR(15),
	sobrenome VARCHAR(30)
);

CREATE TABLE itens (
	lista_id INTEGER,
	produto_id INTEGER,
	quantidade INTEGER,
	PRIMARY KEY(lista_id,produto_id),
	FOREIGN KEY(lista_id) REFERENCES lista (lista_id),
	FOREIGN KEY(produto_id) REFERENCES produto (produto_id)
);


ALTER TABLE produto ADD FOREIGN KEY(categoria_id) REFERENCES categoria (categoria_id);
ALTER TABLE ci_sessions ADD PRIMARY KEY (id);

